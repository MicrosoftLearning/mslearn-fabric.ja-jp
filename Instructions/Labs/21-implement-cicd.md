---
lab:
  title: Microsoft Fabric にデプロイ パイプラインを実装する
  module: Implement CI/CD in Microsoft Fabric
---

# Microsoft Fabric にデプロイ パイプラインを実装する

Microsoft Fabric のデプロイ パイプラインを使用すると、開発、テスト、運用などの環境間で、Fabric アイテムのコンテンツに加えられた変更をコピーするプロセスを自動化できます。 デプロイ パイプラインを使用することで、エンド ユーザーに提供される前にコンテンツを開発およびテストできます。 この演習では、デプロイ パイプラインを作成し、パイプラインにステージを割り当てます。 そして、開発ワークスペースにいくつかのコンテンツを作成し、デプロイ パイプラインを使用して開発、テスト、運用の各パイプライン ステージの間にデプロイします。

> **注**: この演習を完了するには、Fabric ワークスペース管理者ロールのメンバーである必要があります。 ロールを割り当てるには、「[Microsoft Fabric のワークスペースのロール](https://learn.microsoft.com/en-us/fabric/get-started/roles-workspaces)」をご覧ください。

このラボの所要時間は約 **20** 分です。

## ワークスペースを作成する

Fabric 試用版を有効にしてワークスペースを 3 つ作成します。

1. ブラウザーで [Microsoft Fabric ホーム ページ](https://app.fabric.microsoft.com/home?experience=fabric) (`https://app.fabric.microsoft.com/home?experience=fabric`) に移動し、Fabric 資格情報でサインインします。
2. 左側のメニュー バーで、 **[ワークスペース]** を選択します (アイコンは &#128455; に似ています)。
3. "開発" という名前で新しいワークスペースを作成し、Fabric 容量が付くライセンス モード (*試用版*、*Premium*、または *Fabric*) を選択します。
4. 手順 1 と 2 を繰り返し、"テスト" と "運用" という名前でワークスペースをさらに 2 つ作成します。 ワークスペースは、"開発"、"テスト"、"運用" になります。
5. 左側のメニュー バーの **[ワークスペース]** アイコンを選択し、"開発"、"テスト"、"運用" という 3 つのワークスペースがあることを確認します

> **注**: ワークスペースに一意の名前を入力するように求められた場合は、"開発"、"テスト"、"運用" という単語に 1 つまたは複数のランダムな数字を追加してください。

## デプロイ パイプラインを作成する

次に、デプロイ パイプラインを作成します。

1. 左側のメニュー バーで、 **[ワークスペース]** を選択します。
2. **[デプロイ パイプライン]**、**[新しいパイプライン]** の順に選択します。
3. **[新しいデプロイ パイプラインの追加]** ウィンドウで、パイプラインに一意の名前を付け、**[次へ]** を選択します。
4. 新しいパイプライン ウィンドウで **[作成して続行]** を選択します。

## デプロイ パイプラインのステージにワークスペースを割り当てる

デプロイ パイプラインのステージにワークスペースを割り当てます。

1. 左側のメニュー バーで、作成したパイプラインを選択します。 
2. 表示されたウィンドウで、各デプロイ ステージの **[ワークスペースの割り当て]** 下のオプションを展開し、ステージの名前と一致するワークスペースの名前を選択します。
3. デプロイ ステージごとに、**[割り当て]** のチェック マークを選択します。

  ![デプロイ パイプラインのスクリーンショット。](./Images/deployment-pipeline.png)

## コンテンツを作成する

ワークスペースに Fabric アイテムはまだ作成されていません。 次に、開発ワークスペースにレイクハウスを作成します。

1. 左側のメニュー バーで、 **[ワークスペース]** を選択します。
2. **[開発]** ワークスペースを選択します。
3. **[新しい項目]** を選択します。
4. 表示されたウィンドウで **[レイクハウス]** を選択し、**[新しいレイクハウス] ウィンドウ**でレイクハウスの名前を「**LabLakehouse**」に設定します。
5. **［作成］** を選択します
6. [レイクハウス エクスプローラー] ウィンドウで **[サンプル データで開始]** を選択して、新しいレイクハウスにデータを事前入力します。

  ![レイクハウス エクスプローラーのスクリーンショット。](./Images/lakehouse-explorer.png)

7. サンプル **NYCTaxi** を選択します。
8. 左側のメニュー バーで、作成したパイプラインを選択します。
9. **[開発]** ステージを選択すると、デプロイ パイプライン キャンバスに、作成したレイクハウスがステージ項目として表示されます。 **[テスト]** ステージの左端の円内に **[X]** マークがあります。 この **[X]** は、[開発] ステージと [テスト] ステージが同期していないことを示します。
10. **[テスト]** ステージを選択すると、デプロイ パイプライン キャンバスで、作成したレイクハウスはソースのステージ項目にすぎず、それがこの場合は **[開発]** ステージを参照していることがわかります。  

  ![ステージ間のコンテンツの不一致を示すデプロイ パイプラインのスクリーンショット。](./Images/lab-pipeline-compare.png)

## ステージ間にコンテンツをデプロイする

レイクハウスを **[開発]** ステージから **[テスト]** ステージおよび **[運用]** ステージにデプロイします。
1. デプロイ パイプライン キャンバスで**テスト**ステージを選択します。
1. デプロイ パイプライン キャンバスで、レイクハウス アイテムの横にあるチェックボックスをオンにします。 次に、**[デプロイ]** ボタンを選択して、現在の状態のレイクハウスを**テスト**ステージにコピーします。
1. 表示される **[次のステージにデプロイする]** ウィンドウで **[デプロイ]** を選択します。
 これで、デプロイ パイプライン キャンバスの運用ステージの円に X が表示されます。 レイクハウスは [開発] ステージと [テスト] ステージに存在しますが、まだ [運用] ステージには存在しません。
1. デプロイ キャンバスで **[運用]** ステージを選択します。
1. デプロイ パイプライン キャンバスで、レイクハウス アイテムの横にあるチェックボックスをオンにします。 次に、**[デプロイ]** ボタンを選択して、現在の状態のレイクハウスを **[運用]** ステージにコピーします。
1. 表示される **[次のステージにデプロイする]** ウィンドウで **[デプロイ]** を選択します。 ステージ間の緑色のチェック マークは、すべてのステージが同期されて同じコンテンツが含まれていることを示します。
1. デプロイ パイプラインを使用してステージ間でデプロイすると、デプロイ ステージに対応するワークスペース内のコンテンツも更新されます。 確認しましょう。
1. 左側のメニュー バーで、 **[ワークスペース]** を選択します。
1. **[テスト]** ワークスペースを選択します。 レイクハウスはそこにコピーされました。
1. 左側メニューの **[ワークスペース]** アイコンから **[運用]** ワークスペースを開きます。 レイクハウスは [運用] ワークスペースにもコピーされました。

## クリーンアップ

この演習では、デプロイ パイプラインを作成し、パイプラインにステージを割り当てました。 そして、開発ワークスペースにコンテンツを作成し、デプロイ パイプラインを使用してパイプライン ステージ間にデプロイしました。

- 左側のナビゲーション バーで、各ワークスペースのアイコンを選択して、そこに含まれているすべてのアイテムを表示します。
- 上部のツール バーのメニューで、[ワークスペース設定] を選択します。
- [全般] セクションで、[このワークスペースの削除] を選択します。
